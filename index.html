<!DOCTYPE html>
<html lang="ar" dir="rtl" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>موسوعة الشينوبي</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 106'><g stroke='%23000' stroke-width='2.5' stroke-linejoin='round'><path fill='%23ef4444' d='M 2.5,50 A 47.5,47.5 0 1 1 97.5,50 C 75,65 25,65 2.5,50 Z' /><path fill='%23ffffff' d='M 2.5,50 C 2.5,80 25,95 43,95 V 103.5 H 57 V 95 C 75,95 97.5,80 97.5,50 C 75,65 25,65 2.5,50 Z' /></g></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
      :root {
        --bg-dark: #121212;
        --text-dark: #E2E8F0;
        --card-bg-dark: #1A1A1A;
        --border-dark: #2D3748;
        --accent-dark: #E53E3E;
        --accent-dark-hover: #C53030;

        /* Fandom-inspired background colors */
        --fandom-bg-dark: #210f2c;
        --fandom-bg-light: #7b194f;
        --fandom-dot-cyan: rgba(0, 255, 255, 0.4);
        --fandom-dot-gold: rgba(255, 215, 0, 0.7);
        --fandom-dot-pattern: rgba(255, 255, 255, 0.05);
      }

      html {
        scroll-behavior: smooth;
      }

      body {
        font-family: 'Tajawal', 'Cairo', sans-serif;
        color: var(--text-dark);
        background-attachment: fixed;
        min-height: 100vh;
        transition: background-color 0.5s ease;
      }

      /* === THEME: DEFAULT (Fandom-inspired) === */
      body.theme-default {
          background-color: var(--fandom-bg-dark);
          background-image:
              radial-gradient(var(--fandom-dot-pattern) 1px, transparent 1px),
              radial-gradient(circle at 5% 10%, var(--fandom-dot-cyan) 0px, transparent 3px),
              radial-gradient(circle at 95% 5%, var(--fandom-dot-gold) 0px, transparent 3px),
              radial-gradient(circle at 90% 95%, var(--fandom-dot-cyan) 0px, transparent 2px),
              radial-gradient(circle at 90% 10%, var(--fandom-bg-light), var(--fandom-bg-dark) 60%);
          background-size: 15px 15px, 100% 100%, 100% 100%, 100% 100%, 100% 100%;
      }
      .preview-default {
          background-image: radial-gradient(circle at 90% 10%, var(--fandom-bg-light), var(--fandom-bg-dark) 60%);
      }


      /* === THEME: MIDNIGHT === */
      body.theme-midnight {
          background-color: #1e1b4b; /* indigo-950 */
          background-image:
              radial-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
              radial-gradient(circle at 5% 10%, rgba(167, 139, 250, 0.4) 0px, transparent 3px), /* violet-400 */
              radial-gradient(circle at 95% 5%, rgba(139, 92, 246, 0.7) 0px, transparent 3px), /* violet-600 */
              radial-gradient(circle at 90% 95%, rgba(167, 139, 250, 0.4) 0px, transparent 2px),
              radial-gradient(circle at 90% 10%, #4c1d95, #1e1b4b 60%); /* purple-900, indigo-950 */
          background-size: 15px 15px, 100% 100%, 100% 100%, 100% 100%, 100% 100%;
      }
      .preview-midnight { background-image: radial-gradient(circle at 90% 10%, #4c1d95, #1e1b4b 60%); }
      body.theme-midnight ::-webkit-scrollbar-thumb { background: #8B5CF6; } /* violet-500 */
      body.theme-midnight .sidebar-chakra nav a.active, body.theme-midnight .sidebar-chakra .pro-nav-link.active { color: #A78BFA; background-color: rgba(139, 92, 246, 0.15); } /* violet-400 */
      body.theme-midnight .sidebar-chakra nav a.active::after, body.theme-midnight .sidebar-chakra .pro-nav-link.active::after { background-color: #A78BFA; box-shadow: 0 0 8px #A78BFA; }
      body.theme-midnight .bottom-nav-chakra a.active { color: #A78BFA; }
      body.theme-midnight .bottom-nav-chakra a.active::after { background-color: #A78BFA; box-shadow: 0 0 6px #A78BFA; }

      /* === THEME: FOREST === */
      body.theme-forest {
          background-color: #134e4a;
          background-image:
              radial-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
              radial-gradient(circle at 5% 10%, rgba(52, 211, 153, 0.4) 0px, transparent 3px), /* emerald-400 */
              radial-gradient(circle at 95% 5%, rgba(16, 185, 129, 0.7) 0px, transparent 3px), /* emerald-500 */
              radial-gradient(circle at 90% 95%, rgba(52, 211, 153, 0.4) 0px, transparent 2px),
              radial-gradient(circle at 90% 10%, #064e3b, #134e4a 60%); /* emerald-900, teal-900 */
          background-size: 15px 15px, 100% 100%, 100% 100%, 100% 100%, 100% 100%;
      }
      .preview-forest { background-image: radial-gradient(circle at 90% 10%, #064e3b, #134e4a 60%); }
      body.theme-forest ::-webkit-scrollbar-thumb { background: #10B981; } /* emerald-500 */
      body.theme-forest .sidebar-chakra nav a.active, body.theme-forest .sidebar-chakra .pro-nav-link.active { color: #34D399; background-color: rgba(16, 185, 129, 0.15); } /* emerald-400 */
      body.theme-forest .sidebar-chakra nav a.active::after, body.theme-forest .sidebar-chakra .pro-nav-link.active::after { background-color: #34D399; box-shadow: 0 0 8px #34D399; }
      body.theme-forest .bottom-nav-chakra a.active { color: #34D399; }
      body.theme-forest .bottom-nav-chakra a.active::after { background-color: #34D399; box-shadow: 0 0 6px #34D399; }

      /* === THEME: OCEAN === */
      body.theme-ocean {
          background-color: #082f49; /* cyan-950 */
          background-image:
              radial-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
              radial-gradient(circle at 5% 10%, rgba(34, 211, 238, 0.4) 0px, transparent 3px), /* cyan-400 */
              radial-gradient(circle at 95% 5%, rgba(14, 165, 233, 0.7) 0px, transparent 3px), /* sky-500 */
              radial-gradient(circle at 90% 95%, rgba(34, 211, 238, 0.4) 0px, transparent 2px),
              radial-gradient(circle at 90% 10%, #164e63, #082f49 60%); /* cyan-800, cyan-950 */
          background-size: 15px 15px, 100% 100%, 100% 100%, 100% 100%, 100% 100%;
      }
      .preview-ocean { background-image: radial-gradient(circle at 90% 10%, #164e63, #082f49 60%); }
      body.theme-ocean ::-webkit-scrollbar-thumb { background: #06B6D4; } /* cyan-500 */
      body.theme-ocean .sidebar-chakra nav a.active, body.theme-ocean .sidebar-chakra .pro-nav-link.active { color: #22D3EE; background-color: rgba(6, 182, 212, 0.15); } /* cyan-400 */
      body.theme-ocean .sidebar-chakra nav a.active::after, body.theme-ocean .sidebar-chakra .pro-nav-link.active::after { background-color: #22D3EE; box-shadow: 0 0 8px #22D3EE; }
      body.theme-ocean .bottom-nav-chakra a.active { color: #22D3EE; }
      body.theme-ocean .bottom-nav-chakra a.active::after { background-color: #22D3EE; box-shadow: 0 0 6px #22D3EE; }

      /* === THEME: SUNSET === */
      body.theme-sunset {
          background-color: #4a044e; /* fuchsia-950 */
          background-image:
              radial-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
              radial-gradient(circle at 5% 10%, rgba(249, 115, 22, 0.4) 0px, transparent 3px), /* orange-500 */
              radial-gradient(circle at 95% 5%, rgba(239, 68, 68, 0.7) 0px, transparent 3px), /* red-500 */
              radial-gradient(circle at 90% 95%, rgba(249, 115, 22, 0.4) 0px, transparent 2px),
              radial-gradient(circle at 90% 10%, #7f1d1d, #4a044e 60%); /* red-900, fuchsia-950 */
          background-size: 15px 15px, 100% 100%, 100% 100%, 100% 100%, 100% 100%;
      }
      .preview-sunset { background-image: radial-gradient(circle at 90% 10%, #7f1d1d, #4a044e 60%); }
      body.theme-sunset ::-webkit-scrollbar-thumb { background: #F97316; } /* orange-500 */
      body.theme-sunset .sidebar-chakra nav a.active, body.theme-sunset .sidebar-chakra .pro-nav-link.active { color: #FB923C; background-color: rgba(249, 115, 22, 0.15); } /* orange-400 */
      body.theme-sunset .sidebar-chakra nav a.active::after, body.theme-sunset .sidebar-chakra .pro-nav-link.active::after { background-color: #FB923C; box-shadow: 0 0 8px #FB923C; }
      body.theme-sunset .bottom-nav-chakra a.active { color: #FB923C; }
      body.theme-sunset .bottom-nav-chakra a.active::after { background-color: #FB923C; box-shadow: 0 0 6px #FB923C; }
      
      /* === NEW THEME: SAKURA === */
      body.theme-sakura {
        background-color: #4c2a4c;
        background-image:
            radial-gradient(rgba(255, 255, 255, 0.07) 1px, transparent 1px),
            radial-gradient(circle at 10% 20%, rgba(252, 165, 165, 0.3), transparent),
            radial-gradient(circle at 80% 90%, rgba(221, 160, 221, 0.3), transparent),
            linear-gradient(160deg, #382039, #5c3a5a 80%);
        background-size: 20px 20px, 100% 100%, 100% 100%, 100% 100%;
      }
      .preview-sakura { background: linear-gradient(160deg, #382039, #5c3a5a 80%); }
      body.theme-sakura ::-webkit-scrollbar-thumb { background: #f472b6; } /* pink-400 */
      body.theme-sakura .sidebar-chakra nav a.active, body.theme-sakura .sidebar-chakra .pro-nav-link.active { color: #fb7185; background-color: rgba(244, 114, 182, 0.15); } /* rose-400 */
      body.theme-sakura .sidebar-chakra nav a.active::after, body.theme-sakura .sidebar-chakra .pro-nav-link.active::after { background-color: #fb7185; box-shadow: 0 0 8px #fb7185; }
      body.theme-sakura .bottom-nav-chakra a.active { color: #fb7185; }
      body.theme-sakura .bottom-nav-chakra a.active::after { background-color: #fb7185; box-shadow: 0 0 6px #fb7185; }

      /* === REVAMPED PRO THEME: SHINOBI WAR === */
      @keyframes war-sky-shift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      @keyframes war-embers-float {
        0% { transform: translateY(0); opacity: 0; }
        10% { opacity: 0.8; }
        100% { transform: translateY(-100vh) translateX(5vw); opacity: 0; }
      }
      @keyframes war-dust-pan {
        from { background-position: 0% 0%; }
        to { background-position: -1000px 200px; }
      }

      body.theme-war {
        background-color: #281a0b;
        background-image:
          linear-gradient(to top, rgba(25, 15, 5, 0.95) 0%, rgba(25, 15, 5, 0.7) 15%, transparent 30%),
          radial-gradient(ellipse at 50% 120%, rgba(245, 158, 11, 0.4) 0%, transparent 50%),
          linear-gradient(330deg, #8c4a0e 0%, #d97706 50%, #f59e0b 100%),
          radial-gradient(rgba(255, 237, 213, 0.03) 1px, transparent 1px);
        background-size:
          100% 100%,
          150% 150%,
          200% 200%,
          10px 10px;
        background-blend-mode: normal, normal, overlay, normal;
        animation: war-sky-shift 30s ease-in-out infinite;
        position: relative;
        overflow: hidden;
      }
      body.theme-war::before, body.theme-war::after {
        content: ''; position: fixed; inset: 0; z-index: -1; pointer-events: none;
      }
      body.theme-war::before {
        background-image:
          radial-gradient(circle, rgba(251, 191, 36, 0.8) 1px, transparent 1px),
          radial-gradient(circle, rgba(249, 115, 22, 0.6) 2px, transparent 2px);
        background-size: 150px 150px, 300px 300px;
        background-position: 0 0, 150px 150px;
        animation: war-embers-float 15s linear infinite;
        animation-delay: -15s;
      }
      body.theme-war::after {
        background-image:
          radial-gradient(ellipse at 20% 20%, rgba(40, 20, 10, 0.5) 0%, transparent 50%),
          radial-gradient(ellipse at 80% 90%, rgba(50, 25, 12, 0.6) 0%, transparent 60%);
        background-size: 1000px 1000px, 800px 800px;
        animation: war-dust-pan 80s linear infinite;
      }

      .preview-war { background: linear-gradient(330deg, #8c4a0e 0%, #d97706 50%, #f59e0b 100%); }
      body.theme-war ::-webkit-scrollbar-thumb { background: #d97706; } /* amber-600 */
      body.theme-war .sidebar-chakra nav a.active, body.theme-war .sidebar-chakra .pro-nav-link.active { color: #f59e0b; background-color: rgba(217, 119, 6, 0.15); } /* amber-500 */
      body.theme-war .sidebar-chakra nav a.active::after, body.theme-war .sidebar-chakra .pro-nav-link.active::after { background-color: #f59e0b; box-shadow: 0 0 8px #f59e0b; }
      body.theme-war .bottom-nav-chakra a.active { color: #f59e0b; }
      body.theme-war .bottom-nav-chakra a.active::after { background-color: #f59e0b; box-shadow: 0 0 6px #f59e0b; }
      
      /* === NEW PRO THEME: HIDDEN MIST === */
      @keyframes rain-fall { 0% { background-position: 0% 0%; } 100% { background-position: 20% 100%; } }
      @keyframes fog-pan { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
      body.theme-mist {
          background-color: #0f172a; /* slate-900 */
          background-image: linear-gradient(rgba(100, 116, 139, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(100, 116, 139, 0.1) 1px, transparent 1px);
          background-size: 2rem 2rem; position: relative; overflow-x: hidden;
      }
      body.theme-mist::before, body.theme-mist::after {
          content: ''; position: fixed; inset: 0; z-index: -1; pointer-events: none;
      }
      body.theme-mist::before {
          background: linear-gradient(340deg, rgba(15, 23, 42, 0) 40%, rgba(30, 41, 59, 0.8) 70%, rgba(15, 23, 42, 0.9) 100%);
          animation: fog-pan 50s ease-in-out infinite;
      }
      body.theme-mist::after {
          background-image: linear-gradient(175deg, rgba(148, 163, 184, 0.2) 1px, transparent 1px);
          background-size: 5px 50px; animation: rain-fall 1s linear infinite; opacity: 0.4;
      }
      .preview-mist { background: linear-gradient(340deg, #0f172a 40%, #1e293b 80%); }
      body.theme-mist ::-webkit-scrollbar-thumb { background: #06b6d4; } /* cyan-500 */
      body.theme-mist .sidebar-chakra nav a.active, body.theme-mist .sidebar-chakra .pro-nav-link.active { color: #22d3ee; background-color: rgba(6, 182, 212, 0.15); } /* cyan-400 */
      body.theme-mist .sidebar-chakra nav a.active::after, body.theme-mist .sidebar-chakra .pro-nav-link.active::after { background-color: #22d3ee; box-shadow: 0 0 8px #22d3ee; }
      body.theme-mist .bottom-nav-chakra a.active { color: #22d3ee; }
      body.theme-mist .bottom-nav-chakra a.active::after { background-color: #22d3ee; box-shadow: 0 0 6px #22d3ee; }

      /* === PRO THEME IMMERSION STYLES === */
      /* Shinobi War Immersion */
      body.theme-war .sidebar-chakra, body.theme-war .bottom-nav-chakra {
        background: rgba(20, 10, 5, 0.7); backdrop-filter: blur(8px); border-color: #572d0a;
      }
      body.theme-war .sidebar-chakra nav a:hover, body.theme-war .sidebar-chakra .pro-nav-link:hover {
        background-color: rgba(217, 119, 6, 0.2) !important;
      }
      body.theme-war .site-title { color: #fcd34d; text-shadow: 0 0 8px rgba(245, 158, 11, 0.7); }
      body.theme-war .themed-card { background-color: rgba(20, 10, 5, 0.85); border: 2px solid #5c4033; }
      body.theme-war .themed-card:hover { box-shadow: 0 0 20px rgba(245, 158, 11, 0.6); border-color: #f59e0b; }
      body.theme-war .legendary-footer { background-color: #201008; border-color: #572d0a; }
      body.theme-war .footer-content h4 { color: #fde68a; }
      body.theme-war .footer-content p { color: #fef3c7; }
      body.theme-war .quick-look-card:hover { border-color: #f59e0b; }
      body.theme-war .quick-look-card::before { background: radial-gradient(circle at top right, rgba(245, 158, 11, 0.4), transparent 50%); }
      body.theme-war .scroll-view-content { background-color: #281a0b; color: #fef3c7; border-image: linear-gradient(to bottom, #8c4a0e, #d97706) 1; }
      body.theme-war .scroll-view-content h1, body.theme-war .scroll-view-content .text-\[\#4a2e2e\] { color: #fde68a; }
      body.theme-war .scroll-view-content p, body.theme-war .scroll-view-content .text-gray-800\/70, body.theme-war .scroll-view-content .text-gray-800\/90 { color: #fef3c7; }
      body.theme-war .scroll-view-content blockquote { border-color: #f59e0b; color: #fef3c7; }
      body.theme-war .scroll-view-content .scroll-ink-divider { background: linear-gradient(to right, transparent, #d97706, transparent); }
      body.theme-war .scroll-view-content .list-disc li { color: #fef3c7; }
      body.theme-war .scroll-view-content .px-3.py-1 { background-color: rgba(245, 158, 11, 0.2); color: #fde68a; }
      body.theme-war .scroll-view-content .w-full.bg-black\/10 { background: rgba(0,0,0,0.3); }
      body.theme-war .scroll-view-content-inner::-webkit-scrollbar-track { background: #201008; }
      body.theme-war .scroll-view-content-inner::-webkit-scrollbar-thumb { background: #f59e0b; border-color: #201008; }

      /* Hidden Mist Immersion */
      body.theme-mist .sidebar-chakra, body.theme-mist .bottom-nav-chakra {
        background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(8px); border-color: #334155;
      }
      body.theme-mist .sidebar-chakra nav a:hover, body.theme-mist .sidebar-chakra .pro-nav-link:hover {
        background-color: rgba(6, 182, 212, 0.2) !important;
      }
      body.theme-mist .site-title { color: #67e8f9; text-shadow: 0 0 8px rgba(34, 211, 238, 0.7); }
      body.theme-mist .themed-card { background-color: rgba(15, 23, 42, 0.85); border: 2px solid #334155; }
      body.theme-mist .themed-card:hover { box-shadow: 0 0 20px rgba(6, 182, 212, 0.6); border-color: #06b6d4; }
      body.theme-mist .legendary-footer { background-color: #020617; border-color: #1e293b; }
      body.theme-mist .footer-content h4 { color: #a5f3fc; }
      body.theme-mist .footer-content p { color: #e0f2fe; }
      body.theme-mist .quick-look-card:hover { border-color: #06b6d4; }
      body.theme-mist .quick-look-card::before { background: radial-gradient(circle at top right, rgba(6, 182, 212, 0.4), transparent 50%); }
      body.theme-mist .scroll-view-content { background-color: #0f172a; color: #e0f2fe; border-image: linear-gradient(to bottom, #1e293b, #334155) 1; }
      body.theme-mist .scroll-view-content h1, body.theme-mist .scroll-view-content .text-\[\#4a2e2e\] { color: #a5f3fc; }
      body.theme-mist .scroll-view-content p, body.theme-mist .scroll-view-content .text-gray-800\/70, body.theme-mist .scroll-view-content .text-gray-800\/90 { color: #e0f2fe; }
      body.theme-mist .scroll-view-content blockquote { border-color: #06b6d4; color: #e0f2fe; }
      body.theme-mist .scroll-view-content .scroll-ink-divider { background: linear-gradient(to right, transparent, #06b6d4, transparent); }
      body.theme-mist .scroll-view-content .list-disc li { color: #e0f2fe; }
      body.theme-mist .scroll-view-content .px-3.py-1 { background-color: rgba(6, 182, 212, 0.2); color: #a5f3fc; }
      body.theme-mist .scroll-view-content .w-full.bg-black\/10 { background: rgba(255,255,255,0.05); }
      body.theme-mist .scroll-view-content-inner::-webkit-scrollbar-track { background: #020617; }
      body.theme-mist .scroll-view-content-inner::-webkit-scrollbar-thumb { background: #06b6d4; border-color: #020617; }


      body.theme-default {
        background-color: var(--fandom-bg-dark);
        background-image:
            /* Subtle dotted grid */
            radial-gradient(var(--fandom-dot-pattern) 1px, transparent 1px),
            /* Decorative dots */
            radial-gradient(circle at 5% 10%, var(--fandom-dot-cyan) 0px, transparent 3px),
            radial-gradient(circle at 95% 5%, var(--fandom-dot-gold) 0px, transparent 3px),
            radial-gradient(circle at 90% 95%, var(--fandom-dot-cyan) 0px, transparent 2px),
            /* Main gradient */
            radial-gradient(circle at 90% 10%, var(--fandom-bg-light), var(--fandom-bg-dark) 60%);
        background-size:
            15px 15px, /* Dotted grid size */
            100% 100%, /* The rest cover the full area */
            100% 100%,
            100% 100%,
            100% 100%;
      }
      
      .themed-card {
        background-color: rgba(26, 26, 26, 0.8);
        border: 1px solid var(--border-dark);
        backdrop-filter: blur(4px);
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        transition: all 0.3s ease-in-out;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar { width: 10px; }
      ::-webkit-scrollbar-track { background: #1A1A1A; }
      ::-webkit-scrollbar-thumb { background: var(--accent-dark); border-radius: 10px; border: 2px solid #1A1A1A; }

      /* Animations */
      @keyframes animate-continuous-rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      .animate-continuous-rotate {
        animation: animate-continuous-rotate 20s linear infinite;
      }

      /* Kamui Dimensional Vortex Animation - Legendary Tier */
      .kamui-container.kamui-active .sharingan-svg {
        animation: kamui-vortex 2.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
      }
      
      .kamui-container::before,
      .kamui-container::after {
        content: '';
        position: absolute;
        inset: -25%;
        border-radius: 50%;
        border: 2px solid transparent;
        border-top-color: var(--accent-dark);
        opacity: 0;
        transform-origin: center;
        animation: none;
        z-index: 10;
        pointer-events: none;
      }
      
      .kamui-container.kamui-active::before {
        animation: vortex-lines 2.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
      }
      
      .kamui-container.kamui-active::after {
        animation: vortex-lines 2.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
        animation-delay: 0.1s;
        border-top-color: #ff8b8b;
      }
      
      @keyframes kamui-vortex {
        0% { transform: rotate(0) scale(1); filter: none; opacity: 1; }
        20% { transform: rotate(180deg) scale(1.1); filter: drop-shadow(0 0 10px var(--accent-dark)) brightness(1.5); opacity: 1; }
        50% { transform: rotate(1080deg) scale(0); filter: drop-shadow(0 0 15px var(--accent-dark-hover)) brightness(2.5) blur(6px); opacity: 0; }
        51% { opacity: 0; transform: rotate(1080deg) scale(0); }
        80% { transform: rotate(2100deg) scale(1.2); filter: drop-shadow(0 0 20px #ff8b8b) brightness(2); opacity: 1; }
        100% { transform: rotate(2160deg) scale(1); filter: none; opacity: 1; }
      }

      @keyframes vortex-lines {
        0% { transform: scale(2) rotate(0deg); opacity: 0; }
        20% { opacity: 1; }
        50% { transform: scale(0) rotate(720deg); opacity: 0.5; border-width: 3px; }
        51%, 100% { opacity: 0; }
      }
      
      /* === Original Theme Sidebar === */
      .sidebar-chakra {
        background-color: #1A1A1A; /* --card-bg-dark */
        border-left: 1px solid var(--border-dark);
      }

      .sidebar-chakra .site-title {
        color: var(--text-dark);
        text-shadow: none;
      }
      
      .sidebar-chakra nav a, .sidebar-chakra .pro-nav-link {
        color: var(--text-dark);
        transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
        border-radius: 8px;
        position: relative;
      }
      
      .sidebar-chakra nav a::before, .sidebar-chakra .pro-nav-link::before { content: none; }
      
      .sidebar-chakra nav a:hover, .sidebar-chakra .pro-nav-link:hover {
        background-color: rgba(229, 62, 62, 0.1); /* accent color with alpha */
      }
      
      body:not(.theme-sakura):not(.theme-war):not(.theme-mist):not(.theme-forest):not(.theme-ocean):not(.theme-midnight):not(.theme-sunset) .sidebar-chakra nav a.active,
      body:not(.theme-sakura):not(.theme-war):not(.theme-mist):not(.theme-forest):not(.theme-ocean):not(.theme-midnight):not(.theme-sunset) .sidebar-chakra .pro-nav-link.active {
        color: var(--accent-dark);
        font-weight: bold;
        background-color: rgba(229, 62, 62, 0.15);
      }
      
      body:not(.theme-sakura):not(.theme-war):not(.theme-mist):not(.theme-forest):not(.theme-ocean):not(.theme-midnight):not(.theme-sunset) .sidebar-chakra nav a.active::after,
      body:not(.theme-sakura):not(.theme-war):not(.theme-mist):not(.theme-forest):not(.theme-ocean):not(.theme-midnight):not(.theme-sunset) .sidebar-chakra .pro-nav-link.active::after {
        content: '';
        position: absolute;
        top: 15%; right: 0;
        width: 4px; height: 70%;
        background-color: var(--accent-dark);
        border-radius: 4px;
        box-shadow: 0 0 8px var(--accent-dark);
      }

      .bottom-nav-chakra {
        background-color: #1A1A1A;
        border-top: 1px solid var(--border-dark);
      }
      .bottom-nav-chakra a {
        color: #9ca3af; /* Muted gray */
        position: relative;
      }
      body:not(.theme-sakura):not(.theme-war):not(.theme-mist):not(.theme-forest):not(.theme-ocean):not(.theme-midnight):not(.theme-sunset) .bottom-nav-chakra a.active {
        color: var(--accent-dark);
      }
      body:not(.theme-sakura):not(.theme-war):not(.theme-mist):not(.theme-forest):not(.theme-ocean):not(.theme-midnight):not(.theme-sunset) .bottom-nav-chakra a.active::after {
        content: '';
        position: absolute;
        top: 4px;
        left: 50%;
        transform: translateX(-50%);
        width: 6px;
        height: 6px;
        background-color: var(--accent-dark);
        border-radius: 50%;
        box-shadow: 0 0 6px var(--accent-dark);
      }
      

      /* === DORMANT PRO BUTTON === */
      @keyframes spin-gradient {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      @keyframes animate-title-border {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      .pro-button-dormant {
        background: #11051b; /* Dark purple base */
        border-color: #4a044e;
        position: relative;
        overflow: hidden;
      }
      .pro-button-dormant::before {
        content: '';
        position: absolute;
        inset: -2px;
        z-index: 0;
        background: conic-gradient(from 180deg at 50% 50%, #7e22ce, #be185d, #a855f7, #7e22ce);
        animation: spin-gradient 4s linear infinite;
        transition: opacity 0.3s;
      }
      .pro-button-dormant:hover::before {
        opacity: 1;
      }
      .pro-button-dormant::after {
          content: '';
          position: absolute;
          inset: 2px; /* same as border-width */
          background: #11051b;
          border-radius: 9999px; /* to match button's rounded-full */
          z-index: 1;
      }
      .pro-button-dormant .pro-button-content {
          position: relative;
          z-index: 2;
      }
      
      /* --- UNREAL PRO BUTTON --- */
      .pro-button-unreal {
        background: linear-gradient(120deg, #be185d, #7e22ce, #be185d);
        background-size: 200% 200%;
        animation: unreal-gradient 3s ease-in-out infinite;
        border-color: #a855f7;
      }

      @keyframes pro-icon-pulse {
        0%, 100% { filter: drop-shadow(0 0 8px #a855f7); transform: scale(1); }
        50% { filter: drop-shadow(0 0 20px #c084fc); transform: scale(1.05); }
      }

      .pro-icon-active {
        animation: pro-icon-pulse 5s ease-in-out infinite;
      }

      @keyframes unreal-gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      /* --- AKATSUKI PRO BUTTON --- */
       .pro-button-akatsuki {
        background: linear-gradient(120deg, #DC2626, #111827, #DC2626);
        background-size: 200% 200%;
        animation: akatsuki-gradient 4s ease-in-out infinite;
        border-color: #ef4444;
      }
      @keyframes akatsuki-gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      /* NEW AKATSUKI ICON GLOW */
      @keyframes akatsuki-lightning-pulse {
        0%, 10%, 100% {
          filter: drop-shadow(0 0 4px rgba(239, 68, 68, 0.5));
          transform: scale(1);
        }
        5% {
          filter: drop-shadow(0 0 12px rgba(239, 68, 68, 1)) drop-shadow(0 0 20px rgba(185, 28, 28, 0.8));
          transform: scale(1.05);
        }
      }
       .pro-button-akatsuki-icon.active {
        animation: akatsuki-lightning-pulse 5s ease-in-out infinite;
      }


      /* Quiz Animations */
      @keyframes correct-answer-anim {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
      }

      @keyframes incorrect-answer-anim {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }

      /* === NEW: SMALLER HINT BUTTON === */
      .quiz-hint-container {
        position: relative;
        display: flex;
        justify-content: center;
        margin-bottom: -1.75rem; /* Pull progress bar up (half of button height) */
        z-index: 10;
      }
      .quiz-hint-button-bold {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 3.5rem; /* Smaller */
        height: 3.5rem; /* Smaller */
        background: radial-gradient(circle, #fef08a, #facc15);
        border: 3px solid #fefce8;
        border-radius: 9999px;
        color: #4a2e2e;
        backdrop-filter: blur(4px);
        box-shadow: 0 0 20px rgba(251, 191, 36, 0.6), 0 4px 10px rgba(0,0,0,0.3);
        transition: all 0.3s ease;
        animation: hint-pulse 3s infinite;
        position: relative;
      }
      .quiz-hint-button-bold:hover:not(:disabled) {
        transform: scale(1.1);
        animation-play-state: paused;
        box-shadow: 0 0 30px rgba(251, 191, 36, 0.8), 0 6px 15px rgba(0,0,0,0.3);
      }
      .quiz-hint-button-bold:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        filter: grayscale(80%);
        animation: none;
      }
      .quiz-hint-button-bold .w-10 { width: 2rem; } /* Adjust icon size */
      .quiz-hint-button-bold .h-10 { height: 2rem; } /* Adjust icon size */

      .hint-counter {
        position: absolute;
        top: -4px;
        right: -4px;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 1.75rem; /* Smaller */
        height: 1.75rem; /* Smaller */
        font-size: 0.9rem; /* Smaller */
        border-radius: 50%;
        background-color: #f87171;
        color: white;
        font-weight: 900;
        border: 2px solid white;
      }
      @keyframes hint-pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }

      @keyframes hint-reveal {
        from { opacity: 0; transform: translateY(10px) scale(0.95); }
        to { opacity: 1; transform: translateY(0) scale(1); }
      }
      .hint-chakra-aura {
        border: 1px solid rgba(251, 191, 36, 0.5);
        background: rgba(251, 191, 36, 0.1);
        padding: 1rem 1.5rem;
        border-radius: 0.75rem;
        box-shadow: 0 0 20px rgba(251, 191, 36, 0.3);
        animation: hint-reveal 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      }


      /* Quiz Progress Bar */
      .quiz-progress-bar {
          background: rgba(10, 5, 15, 0.5);
          border: 2px solid #4a044e;
          box-shadow: inset 0 2px 4px rgba(0,0,0,0.4);
          padding: 4px;
          border-radius: 9999px;
          position: relative;
      }
      .quiz-progress-bar-inner {
          background: linear-gradient(90deg, #be185d, #a855f7);
          border-radius: 9999px;
          height: 100%;
          position: relative;
          overflow: hidden;
          transition: width 0.5s cubic-bezier(0.25, 1, 0.5, 1);
      }
      .quiz-progress-bar-inner::after {
          content: '';
          position: absolute;
          top: 0;
          right: 0;
          bottom: 0;
          width: 50%;
          background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 100%);
          transform: skewX(-25deg);
          animation: progress-shine 2.5s infinite;
      }
      @keyframes progress-shine {
          from { left: -100%; }
          to { left: 150%; }
      }
      
      /* === CINEMATIC FADE IN === */
      @keyframes cinematic-fade-in {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      /* === NEW: SIX PATHS AWAKENING SCENE === */
      .awakening-scene-bg {
          position: fixed; inset: 0; z-index: 70;
          background-color: #000;
          display: flex; align-items: center; justify-content: center;
          overflow: hidden;
          perspective: 1000px;
      }
      .awakening-container {
        position: relative;
        width: 100%; height: 100%;
        display: flex; align-items: center; justify-content: center;
      }

      .truth-seeking-orb {
        width: 10vmin; height: 10vmin;
        background: #000; border-radius: 50%;
        box-shadow: 0 0 10px #000, inset 0 0 5px #222;
        animation: orb-appear 2s forwards;
      }
      @keyframes orb-appear {
          from { transform: scale(0); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
      }

      .chakra-wisp {
        position: absolute;
        width: 10vmin; height: 10vmin;
        opacity: 0;
        cursor: pointer;
        animation: wisp-orbit 10s linear infinite, wisp-fade-in 1s forwards;
        transform: rotate(var(--angle)) translateY(-30vmin) rotate(-90deg);
        filter: blur(1vmin);
      }
      .chakra-wisp::before {
        content: ''; position: absolute; inset: 0;
        border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        background: radial-gradient(circle, var(--wisp-color), transparent 70%);
        animation: wisp-morph 8s ease-in-out infinite alternate;
      }
      @keyframes wisp-fade-in { to { opacity: 0.8; } }
      @keyframes wisp-orbit { to { transform: rotate(calc(var(--angle) + 360deg)) translateY(-30vmin) rotate(-90deg); } }
      @keyframes wisp-morph { to { border-radius: 30% 70% 70% 30% / 30% 70% 30% 70%; } }
      .chakra-wisp.captured {
          animation: wisp-suck-in 0.8s ease-in forwards;
      }
      @keyframes wisp-suck-in {
          to { transform: rotate(var(--angle)) translateY(0) scale(0); opacity: 0; }
      }
      .awakening-prompt {
        position: absolute; bottom: 10%;
        color: #fff; font-size: 1.5rem; text-shadow: 0 0 10px #fff;
        opacity: 0; animation: cinematic-fade-in 1s 3s forwards;
      }

      .awakening-rinnegan-container {
        animation: rinnegan-unveil 4s forwards;
      }
      @keyframes rinnegan-unveil {
        0% { transform: scale(0); opacity: 0; }
        30% { transform: scale(1); opacity: 1; filter: drop-shadow(0 0 20px #c084fc); }
        70% { transform: scale(1.1); filter: drop-shadow(0 0 40px #c084fc) brightness(1.5); }
        100% { transform: scale(1); filter: none; }
      }
      .awakening-rinnegan {
        width: 30vmin; height: 30vmin;
      }

      .shakujo-staff {
        position: absolute;
        width: 2vmin; height: 80vmin;
        background: linear-gradient(to bottom, #fde047, #facc15, #4a2e2e, #4a2e2e);
        border-radius: 1vmin;
        opacity: 0;
        animation: staff-appear 2s 1s forwards;
        z-index: -1;
      }
       @keyframes staff-appear {
          from { opacity: 0; transform: translateY(100%); }
          to { opacity: 1; transform: translateY(0); }
      }

      .truth-seeking-orbs-container {
        position: absolute;
        width: 100%; height: 100%;
        display: flex; align-items: center; justify-content: center;
        animation: orbs-rotate 20s linear infinite;
      }
      @keyframes orbs-rotate {
          to { transform: rotate(360deg); }
      }
      .awakening-orb {
        position: absolute;
        width: 5vmin; height: 5vmin;
        background: #000;
        border-radius: 50%;
        animation: orb-fly-out 1s 0.5s ease-out forwards;
        transform: var(--transform-end);
      }
       @keyframes orb-fly-out {
          from { top: 50%; left: 50%; transform: translate(-50%, -50%); }
          to { top: 50%; left: 50%; transform: translate(-50%, -50%) var(--transform-end); }
      }

      .ascension-flash {
        position: absolute; inset: 0;
        background: white;
        opacity: 0;
        animation: flash-bang 1.5s ease-out forwards;
      }
      @keyframes flash-bang {
        0% { opacity: 1; }
        100% { opacity: 0; }
      }

      .awakening-aftermath {
        position: fixed; inset: 0;
        display: flex; align-items: center; justify-content: center;
        background: radial-gradient(circle, #fffbeb, #fefce8);
        opacity: 0;
        animation: aftermath-fade-in 1.5s forwards;
        z-index: 72;
      }
      @keyframes aftermath-fade-in { to { opacity: 1; } }

      .awakening-text {
        text-align: center;
        color: #ca8a04;
        opacity: 0;
        animation: text-glow-fade-in 2.5s forwards;
      }
      @keyframes text-glow-fade-in {
        from { opacity: 0; transform: translateY(10px); text-shadow: 0 0 20px #fef08a; }
        to { opacity: 1; transform: translateY(0); text-shadow: 0 0 5px #fef08a; }
      }
      
      /* === INFINITE TSUKUYOMI FAILURE SCENE === */
      .tsukuyomi-failure-scene {
        position: absolute; inset: 0; z-index: 100;
        display: flex; flex-col; align-items: center; justify-content: center;
        background-color: #000;
        overflow: hidden;
        animation: cinematic-fade-in 1s;
      }

      .tsukuyomi-moon {
        position: absolute;
        left: 50%;
        width: 150vmax; height: 150vmax;
        background: radial-gradient(circle, #dc2626 5%, #b91c1c 20%, #7f1d1d 40%, #450a0a 70%);
        border-radius: 50%;
        transform: translate(-50%, 100%);
        animation: moon-rise 6s ease-out forwards;
        display: flex; align-items: center; justify-content: center;
      }
      @keyframes moon-rise {
        to { transform: translate(-50%, 40%); }
      }

      .rinne-sharingan-overlay {
        width: 100%; height: 100%;
        color: #111;
        opacity: 0.5;
        animation: animate-continuous-rotate 60s linear infinite;
      }

      .tsukuyomi-text-container {
        position: relative;
        text-align: center;
        opacity: 0;
        animation: dream-text-appear 2s 3s forwards;
        z-index: 110;
      }
      @keyframes dream-text-appear {
        to { opacity: 1; }
      }

      .tsukuyomi-text {
        font-family: 'Cairo', sans-serif;
        color: #fecaca;
        text-shadow: 0 0 10px #ef4444, 0 0 20px #dc2626, 0 0 30px #dc2626;
        animation: text-waver 5s ease-in-out infinite;
      }
      @keyframes text-waver {
        0%, 100% { transform: skewX(-2deg); filter: blur(0.5px); }
        50% { transform: skewX(2deg); filter: blur(1px); }
      }

      .quiz-modal-container.is-failing > *:not(.tsukuyomi-failure-scene) {
        animation: quiz-gets-trapped 2s 1s forwards;
      }
      @keyframes quiz-gets-trapped {
        0% { filter: none; opacity: 1; transform: scale(1); }
        50% { filter: blur(2px) grayscale(0.5); transform: scale(0.98); }
        100% { filter: blur(8px) grayscale(1); opacity: 0; transform: scale(0.9); }
      }
      
      /* NEW: QUIZ BACKGROUND SHARINGAN & RINNEGAN */
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      .quiz-bg-sharingan {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100vmin;
        height: 100vmin;
        transform: translate(-50%, -50%);
        color: #e53e3e;
        opacity: 0;
        filter: drop-shadow(0 0 20px var(--accent-dark-hover));
        animation: quiz-sharingan-awaken 10s ease-in-out infinite;
      }

      @keyframes quiz-sharingan-awaken {
        0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8) rotate(-90deg); }
        20%, 80% { opacity: 0.3; transform: translate(-50%, -50%) scale(1) rotate(0deg); }
        50% { opacity: 0.4; transform: translate(-50%, -50%) scale(1.05) rotate(90deg); }
      }
      
      .rotating-rinnegan-bg {
          animation: spin 25s linear infinite;
      }
      
      /* ===== AKATSUKI THEME (Revamped) ===== */
      @keyframes sky-flow {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      body.theme-akatsuki {
        background-color: #110101;
        background-image: 
          radial-gradient(ellipse at 50% 100%, rgba(185, 28, 28, 0.4) 0%, transparent 60%),
          linear-gradient(175deg, #000 0%, #110101 30%, #450a0a 100%);
        background-size: 200% 200%;
        animation: sky-flow 25s ease-in-out infinite;
      }
      .preview-akatsuki { 
        background-image: linear-gradient(175deg, #000 0%, #110101 30%, #450a0a 100%);
      }

      body.theme-akatsuki ::-webkit-scrollbar-track { background: #111; }
      body.theme-akatsuki ::-webkit-scrollbar-thumb { background: #DC2626; border: 2px solid #111; border-radius: 10px; }
      
      /* Navigation */
      body.theme-akatsuki .sidebar-chakra, body.theme-akatsuki .bottom-nav-chakra {
        background: rgba(0,0,0,0.7);
        backdrop-filter: blur(8px);
        border-color: #450a0a;
      }
      body.theme-akatsuki nav a, body.theme-akatsuki .pro-nav-link {
        color: #e5e7eb !important;
      }
       body.theme-akatsuki .sidebar-chakra nav a:hover, body.theme-akatsuki .sidebar-chakra .pro-nav-link:hover {
        background-color: rgba(220, 38, 38, 0.2) !important;
      }
      body.theme-akatsuki .sidebar-chakra nav a.active, body.theme-akatsuki .sidebar-chakra .pro-nav-link.active {
        color: #fca5a5 !important;
        font-weight: bold;
        background-color: rgba(220, 38, 38, 0.25) !important;
      }
      body.theme-akatsuki .sidebar-chakra nav a.active::after, body.theme-akatsuki .sidebar-chakra .pro-nav-link.active::after {
         content: "";
         background-color: #DC2626 !important;
         box-shadow: 0 0 8px #DC2626 !important;
         width: 4px;
         height: 70%;
         background-image: none;
         animation: none;
      }

       body.theme-akatsuki .bottom-nav-chakra a.active {
        color: #DC2626 !important;
      }
      body.theme-akatsuki .bottom-nav-chakra a.active::after {
        background-color: #DC2626 !important;
        box-shadow: 0 0 6px #DC2626 !important;
      }
      body.theme-akatsuki .site-title {
        color: #fca5a5;
        text-shadow: 0 0 8px rgba(239, 68, 68, 0.7);
      }

      /* Themed Cards */
      body.theme-akatsuki .themed-card {
        background-color: rgba(12, 10, 9, 0.85);
        border: 2px solid #3f3f46;
        border-radius: 0.5rem;
      }
      body.theme-akatsuki .themed-card:hover {
        box-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
        border-color: #ef4444;
      }

      /* Search Bar Override */
      body.theme-akatsuki .akatsuki-search-bar {
        background-color: #111827 !important;
        border-color: #ef4444 !important;
      }
      body.theme-akatsuki .akatsuki-search-bar input { color: #fca5a5; }
      body.theme-akatsuki .akatsuki-search-bar input::placeholder { color: #b91c1c; opacity: 1; }
      body.theme-akatsuki .akatsuki-search-bar-icon-bg { background-color: #ef4444 !important; }
      body.theme-akatsuki .akatsuki-search-bar-icon-stroke { stroke: #111827 !important; }
      body.theme-akatsuki .akatsuki-search-dropdown {
        background-color: #18181b !important;
        border-color: #450a0a !important;
      }
      body.theme-akatsuki .akatsuki-search-dropdown a:hover { background-color: rgba(220, 38, 38, 0.3) !important; }
      body.theme-akatsuki .akatsuki-search-dropdown h4 { color: #fca5a5; }
      
      /* === SECRET CODE INPUT (Keyboard Version) === */
      .secret-code-modal-bg {
        position: fixed; inset: 0;
        background: rgba(0, 0, 0, 0.85);
        backdrop-filter: blur(5px);
        z-index: 100;
        animation: cinematic-fade-in 0.3s ease-out;
      }
      .secret-code-container {
        position: relative;
        background-color: rgba(12, 10, 9, 0.95);
        border: 2px solid #450a0a;
        border-radius: 1rem;
        padding: 2rem;
        box-shadow: 0 0 40px rgba(220, 38, 38, 0.4);
        animation: cinematic-fade-in 0.5s 0.1s ease-out backwards;
      }
      .secret-code-input {
        background: #000;
        border: 2px solid #7f1d1d;
        border-radius: 0.5rem;
        padding: 1rem;
        text-align: center;
        font-size: 2rem;
        font-family: 'Cairo', monospace;
        letter-spacing: 0.2em;
        color: #fca5a5;
        height: 70px;
        margin-bottom: 1.5rem;
        box-shadow: inset 0 0 10px rgba(239, 68, 68, 0.5);
        text-shadow: 0 0 5px rgba(239, 68, 68, 0.7);
        transition: all 0.3s ease;
        width: 100%;
      }
      .secret-code-input:focus {
        outline: none;
        border-color: #ef4444;
        box-shadow: 0 0 20px #ef4444, inset 0 0 10px rgba(239, 68, 68, 0.5);
      }

      /* Animations for code status */
      @keyframes secret-code-success-anim {
          50% { 
            box-shadow: 0 0 20px #22c55e, inset 0 0 10px #22c55e;
            border-color: #4ade80;
            text-shadow: 0 0 8px #4ade80;
         }
      }
      .secret-code-success .secret-code-input {
        animation: secret-code-success-anim 1s ease-in-out;
        color: #bbf7d0;
        border-color: #22c55e;
      }

      @keyframes secret-code-failure-anim {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
        20%, 40%, 60%, 80% { transform: translateX(8px); }
      }
      .secret-code-failure {
        animation: secret-code-failure-anim 0.5s ease-in-out;
      }
      .secret-code-failure .secret-code-input {
        border-color: #ef4444;
        box-shadow: inset 0 0 10px rgba(239, 68, 68, 0.5);
      }
      
      /* === BATTLE PAGE: RADICAL OVERHAUL === */
        .battle-page-container {
            min-height: calc(100vh - 10rem);
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* --- PHASE 1: SELECTION --- */
        .battle-selection-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            width: 100%;
            height: 100%;
            animation: cinematic-fade-in 1s ease-out;
        }
        @media (min-width: 1024px) {
            .battle-selection-grid { grid-template-columns: 4fr 5fr; }
        }
        
        .challenger-pod, .opponent-scroll-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            border-radius: 1.5rem;
        }
        .challenger-pod {
            background: rgba(10, 5, 15, 0.7);
            border: 2px solid #4a044e;
        }
        .pod-title, .scroll-title {
            font-family: 'Cairo', sans-serif;
            font-weight: 900;
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .pod-emoji-container {
            width: 12rem; height: 12rem;
            display: flex; align-items: center; justify-content: center;
            border-radius: 9999px;
            background: rgba(0,0,0,0.3);
            margin-bottom: 1.5rem;
            border-width: 4px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .pod-name {
            font-size: 2.5rem;
            font-weight: 900;
            font-family: 'Cairo', sans-serif;
        }
        .pod-rank { font-size: 1.25rem; color: #a78bfa; }

        .opponent-scroll-container {
            background-color: #f3e9d2;
            color: #4a2e2e;
            border: 8px solid;
            border-image: linear-gradient(to bottom, #6b4f4f, #a9876a) 1;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            max-height: 70vh;
        }
        .scroll-search-input {
            background-color: transparent; border: none;
            border-bottom: 2px solid rgba(74, 46, 46, 0.5);
            border-radius: 0; text-align: center;
            font-size: 1.25rem; font-family: 'Cairo', sans-serif;
            font-weight: bold; color: #4a2e2e;
            transition: border-color 0.3s ease;
            width: 100%; padding: 0.5rem; margin-bottom: 1rem;
        }
        .scroll-search-input::placeholder { color: rgba(74, 46, 46, 0.6); }
        .scroll-search-input:focus { outline: none; border-bottom-color: #4a2e2e; }
        .scroll-list {
            flex-grow: 1; overflow-y: auto; width: 100%;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem; padding-right: 0.5rem;
        }
        .scroll-opponent-card {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 0.75rem; border-radius: 0.5rem;
            background: rgba(74, 46, 46, 0.05);
            border: 2px solid rgba(74, 46, 46, 0.2);
            transition: all 0.3s ease; cursor: pointer;
        }
        .scroll-opponent-card:hover {
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
            transform: translateY(-5px);
        }
        .scroll-opponent-name {
            font-size: 0.8rem; font-weight: bold;
            text-align: center; margin-top: 0.5rem;
        }
        .scroll-list::-webkit-scrollbar { width: 8px; }
        .scroll-list::-webkit-scrollbar-track { background: #d1c4a8; }
        .scroll-list::-webkit-scrollbar-thumb { background: #8a6d4e; border-radius: 10px; }

        /* --- PHASE 2: INTRO (THE LEGENDARY ANIMATION) --- */
        .battle-intro-container {
            position: fixed; inset: 0; z-index: 65;
            display: flex; align-items: center; justify-content: space-between;
            padding: 2rem; background: #000;
            overflow: hidden;
            animation: battle-bg-fade-out 0.5s 3.5s forwards;
        }
        @keyframes battle-bg-fade-out { to { opacity: 0; } }

        .fighter-intro-pod {
            position: relative;
            display: flex; align-items: center; justify-content: center;
            width: 14rem; height: 14rem;
            opacity: 0;
            animation: fighter-appear 1s 0.2s forwards, fighter-dash 1s 1.5s cubic-bezier(0.65, 0, 0.35, 1) forwards;
        }
        @keyframes fighter-appear {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }
        .fighter-intro-pod.left { animation-name: fighter-appear, fighter-dash-left; }
        .fighter-intro-pod.right { animation-name: fighter-appear, fighter-dash-right; }
        @keyframes fighter-dash-left {
            to { transform: translateX(calc(50vw - 8rem)) scale(1.2); opacity: 0; }
        }
        @keyframes fighter-dash-right {
            to { transform: translateX(calc(-50vw + 8rem)) scale(1.2); opacity: 0; }
        }

        .chakra-burst {
            position: absolute; inset: -50%; border-radius: 50%;
            animation: chakra-burst 1s ease-out forwards;
        }
        @keyframes chakra-burst {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.5); opacity: 0.8; }
            100% { transform: scale(3); opacity: 0; }
        }
        .kyubi-burst { box-shadow: 0 0 50px 30px #f97316, 0 0 80px 50px #fb923c inset; }
        .susanoo-burst { box-shadow: 0 0 50px 30px #8b5cf6, 0 0 80px 50px #a78bfa inset; }

        .cosmic-clash-center {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 1px; height: 1px;
        }
        .cosmic-clash-explosion {
            position: absolute; inset: 0; border-radius: 50%; opacity: 0;
            animation: cosmic-clash-explosion 1s 2.5s ease-out forwards;
        }
        @keyframes cosmic-clash-explosion {
            0% { transform: scale(0); background: #fff; opacity: 1; }
            50% { transform: scale(50); opacity: 0.8; }
            100% { transform: scale(40); opacity: 0; }
        }
        .cosmic-clash-shockwave {
            position: absolute; width: 100vmax; height: 100vmax;
            top: -50vmax; left: -50vmax;
            border: 0px solid white; border-radius: 50%;
            opacity: 0;
            animation: cosmic-clash-shockwave 1.5s 2.7s ease-out forwards;
        }
        @keyframes cosmic-clash-shockwave {
            0% { transform: scale(0.1); opacity: 1; border-width: 20px; }
            100% { transform: scale(3); opacity: 0; border-width: 0px; }
        }

        /* --- PHASE 3: RESULTS --- */
        .battle-result-container {
            width: 100%; display: flex; flex-direction: column;
            align-items: center; gap: 1rem;
            animation: cinematic-fade-in 1s forwards;
        }
        .result-fighters-grid {
            display: flex; flex-direction: column;
            gap: 1rem; align-items: center;
            justify-content: center; width: 100%;
        }
        @media (min-width: 768px) {
            .result-fighters-grid { flex-direction: row; gap: 2rem; }
        }

        .fighter-result-pod {
            display: flex; flex-direction: column; align-items: center;
            transition: all 1s ease;
            animation: fighter-result-appear 1s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }
        @keyframes fighter-result-appear {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fighter-result-pod.winner { animation-delay: 0.2s; }
        .fighter-result-pod.loser {
            animation-delay: 0.4s;
            filter: saturate(0.5);
            opacity: 0.7;
        }

        .pod-emoji-container-result {
            width: 10rem; height: 10rem;
            display: flex; align-items: center; justify-content: center;
            border-radius: 9999px; background: rgba(0,0,0,0.3);
            border-width: 4px; margin-bottom: 1rem;
        }
        .pod-name-result { font-size: 2rem; font-weight: 900; font-family: 'Cairo', sans-serif; }

        .winner-announcement {
            font-family: 'Cairo', sans-serif; font-size: 2.5rem; font-weight: 900;
            color: #facc15; margin-bottom: 0.5rem;
            text-shadow: 0 0 15px #fde047;
            animation: cinematic-fade-in 1s 1s backwards;
        }
        .draw-announcement {
            font-family: 'Cairo', sans-serif; font-size: 3rem; font-weight: 900;
            color: #e2e8f0; text-shadow: 0 0 10px #fff;
            animation: cinematic-fade-in 1s 1s backwards;
        }
        @keyframes winner-aura-strong {
            0%, 100% { box-shadow: 0 0 30px #facc15, 0 0 50px #facc15, 0 0 70px #f59e0b; }
            50% { box-shadow: 0 0 40px #fde047, 0 0 65px #fde047, 0 0 90px #fbbf24; }
        }
        .winner-aura-strong { animation: winner-aura-strong 3s ease-in-out infinite; }
        
        .result-cards-grid {
            display: grid; grid-template-columns: 1fr;
            gap: 1rem; width: 100%;
            max-width: 56rem;
        }
        @media (min-width: 768px) {
            .result-cards-grid { grid-template-columns: 1fr 1fr; gap: 2rem; }
        }

        .battle-result-card {
            background-color: rgba(26, 26, 26, 0.8);
            border: 1px solid var(--border-dark);
            backdrop-filter: blur(4px);
            padding: 1.5rem;
            border-radius: 1rem;
            animation: result-card-enter 1s 1.2s backwards;
        }
        @keyframes result-card-enter {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .battle-result-card.winner-card {
            border-color: #facc15;
            box-shadow: 0 0 20px rgba(250, 204, 21, 0.4);
        }
        .result-card-title {
            font-family: 'Cairo', sans-serif;
            font-size: 1.5rem; font-weight: bold; text-align: center;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-dark);
            margin-bottom: 1rem;
        }
        .result-card-stats { display: flex; flex-direction: column; gap: 0.5rem; }
        .stat-row { display: grid; grid-template-columns: 1fr 1fr; align-items: center; }
        .stat-label { font-weight: bold; color: #9ca3af; text-align: right; padding-left: 1rem; }
        .stat-value { font-size: 1.125rem; }
        .stat-column { display: flex; flex-direction: column; align-items: center; margin-top: 0.5rem; }
        .stat-label-col { font-weight: bold; color: #9ca3af; margin-bottom: 0.5rem; }
        .stat-list { list-style: none; padding: 0; text-align: center; }
        .stat-list li { padding: 0.1rem 0; }

        .new-battle-button {
            margin-top: 1rem;
            background-color: #7e22ce;
            color: white; font-weight: bold; padding: 0.75rem 2rem;
            border-radius: 0.5rem; transition: background-color 0.2s;
            animation: result-card-enter 1s 1.5s backwards;
        }
        .new-battle-button:hover { background-color: #a855f7; }

      /* === DETAIL VIEW EXIT BUTTON === */
      @keyframes fire-lightning-glow {
        0%, 100% {
          box-shadow: 0 0 15px rgba(251, 191, 36, 0.6), 0 0 5px rgba(139, 92, 246, 0.8) inset;
        }
        50% {
          box-shadow: 0 0 25px rgba(251, 191, 36, 0.8), 0 0 8px rgba(139, 92, 246, 1) inset;
        }
      }

      .detail-exit-button {
        position: absolute;
        top: 1.5rem;
        right: 1.5rem;
        z-index: 20;
        width: 3rem;
        height: 3rem;
        border-radius: 9999px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #f59e0b, #ef4444, #8b5cf6);
        border: 2px solid rgba(255, 255, 255, 0.4);
        color: white;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        animation: fire-lightning-glow 4s ease-in-out infinite;
        cursor: pointer;
      }

      .detail-exit-button:hover {
        transform: scale(1.1) rotate(90deg);
      }
      
      /* === LEGENDARY FOOTER === */
      .legendary-footer {
        position: relative;
        padding: 2rem 1rem;
        margin-top: 4rem;
        background-color: #2a1a1f; /* Dark wood color */
        border-top: 6px solid #4a2e2e;
        border-bottom: 6px solid #4a2e2e;
        box-shadow: 0 -5px 15px rgba(0,0,0,0.4), 0 5px 15px rgba(0,0,0,0.4), inset 0 0 10px rgba(0,0,0,0.5);
      }
      .footer-content h4 {
        font-family: 'Cairo', sans-serif;
        font-size: 1.5rem;
        font-weight: 900;
        color: #f3e9d2;
      }
      .footer-content p {
        margin-top: 0.25rem;
        font-size: 0.9rem;
        color: #c8bdae;
      }
      
      /* Akatsuki Footer Theme */
      body.theme-akatsuki .legendary-footer {
        background-color: #1f1f1f;
        border-color: #7f1d1d;
        box-shadow: 0 -5px 15px rgba(0,0,0,0.4), 0 5px 15px rgba(0,0,0,0.4), inset 0 0 10px #7f1d1d;
      }
      body.theme-akatsuki .footer-content h4 { color: #fca5a5; }
      body.theme-akatsuki .footer-content p { color: #fda4af; }
      

      /* === NEW: FULL SCREEN SCROLL DETAIL VIEW === */
      @keyframes scroll-unfurl {
        from {
          opacity: 0;
          transform: scale(0.8) translateY(20px);
          filter: blur(10px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
          filter: blur(0);
        }
      }
      .scroll-view-container {
        position: fixed;
        inset: 0;
        z-index: 60;
        background: rgba(10, 5, 15, 0.8);
        backdrop-filter: blur(8px);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        animation: cinematic-fade-in 0.5s ease-out;
        overflow: hidden;
      }

      .scroll-view-content {
        position: relative;
        width: 100%;
        max-width: 900px;
        height: 90vh;
        max-height: 700px;
        background: #f3e9d2;
        color: #4a2e2e;
        border: 8px solid;
        border-image: linear-gradient(to bottom, #6b4f4f, #a9876a) 1;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        border-radius: 4px;
        animation: scroll-unfurl 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        display: flex;
        overflow: hidden;
        z-index: 1;
        transition: background-color 0.4s ease;
      }
      
      body.theme-akatsuki .scroll-view-content {
          background-color: #270a0a;
          color: #fecaca;
          border-image: linear-gradient(to bottom, #7f1d1d, #b91c1c) 1;
      }
       /* FIX: Akatsuki Detail View Text Readability */
       body.theme-akatsuki .scroll-view-content h1,
       body.theme-akatsuki .scroll-view-content .text-\[\#4a2e2e\] { color: #fca5a5; }
       body.theme-akatsuki .scroll-view-content p,
       body.theme-akatsuki .scroll-view-content .text-gray-800\/70,
       body.theme-akatsuki .scroll-view-content .text-gray-800\/90 { color: #fecaca; }
       body.theme-akatsuki .scroll-view-content blockquote { border-color: #ef4444; color: #fecaca; }
       body.theme-akatsuki .scroll-view-content .scroll-ink-divider { background: linear-gradient(to right, transparent, #b91c1c, transparent); }
       body.theme-akatsuki .scroll-view-content .list-disc li { color: #fecaca; }
       body.theme-akatsuki .scroll-view-content .px-3.py-1 { background-color: rgba(239, 68, 68, 0.2); color: #fca5a5; }
       body.theme-akatsuki .scroll-view-content .w-full.bg-black\/10 { background: rgba(0,0,0,0.3); }


      .scroll-view-content-inner {
        padding: 2rem 2.5rem;
        overflow-y: auto;
        flex-grow: 1;
      }
      /* Custom scrollbar for the scroll view */
      .scroll-view-content-inner::-webkit-scrollbar { width: 12px; }
      .scroll-view-content-inner::-webkit-scrollbar-track { background: #d1c4a8; }
      .scroll-view-content-inner::-webkit-scrollbar-thumb { background: #8a6d4e; border-radius: 10px; border: 3px solid #d1c4a8; }
       body.theme-akatsuki .scroll-view-content-inner::-webkit-scrollbar-track { background: #111; }
       body.theme-akatsuki .scroll-view-content-inner::-webkit-scrollbar-thumb { background: #ef4444; border-color: #111; }

      .scroll-ink-divider {
        width: 50%;
        height: 2px;
        background: linear-gradient(to right, transparent, #4a2e2e, transparent);
        margin: 1.5rem auto;
        opacity: 0.6;
      }
      
      /* === NEW: HOMEPAGE QUICK LOOK SECTION === */
        .quick-look-section {
            animation: cinematic-fade-in 1s 0.5s backwards;
        }
        .quick-look-card {
            background-color: rgba(26, 26, 26, 0.5);
            border: 1px solid var(--border-dark);
            backdrop-filter: blur(4px);
            transition: all 0.3s ease-in-out;
            position: relative;
            overflow: hidden;
        }
        .quick-look-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            border-color: #a855f7;
        }
        .quick-look-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(168, 85, 247, 0.3), transparent 50%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        .quick-look-card:hover::before {
            opacity: 1;
        }
        body.theme-akatsuki .quick-look-card:hover {
            border-color: #ef4444;
        }
         body.theme-akatsuki .quick-look-card::before {
            background: radial-gradient(circle at top right, rgba(239, 68, 68, 0.4), transparent 50%);
        }

      /* === SETTINGS MENU === */
      .settings-modal-bg {
          position: fixed; inset: 0;
          background: rgba(0, 0, 0, 0.85);
          backdrop-filter: blur(5px);
          z-index: 100;
          animation: cinematic-fade-in 0.3s ease-out;
      }
      .settings-modal-container {
          background-color: rgba(18,18,18, 0.95);
          border: 1px solid var(--border-dark);
          border-radius: 1rem;
          padding: 1.5rem;
          box-shadow: 0 0 40px rgba(168, 85, 247, 0.2);
          animation: cinematic-fade-in 0.5s 0.1s ease-out backwards;
          width: 90%;
          max-width: 600px;
          position: relative;
      }
      .theme-preview-card {
          border: 2px solid var(--border-dark);
          border-radius: 0.75rem;
          overflow: hidden;
          cursor: pointer;
          transition: all 0.2s ease-in-out;
          position: relative;
      }
      .theme-preview-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 8px 20px rgba(0,0,0,0.4);
          border-color: #a855f7;
      }
      .theme-preview-card.active {
          border-color: #c084fc;
          box-shadow: 0 0 20px rgba(192, 132, 252, 0.5);
      }
      .theme-preview-visual {
          height: 80px;
          background-size: cover;
          background-position: center;
      }
      
      .pro-badge {
        position: absolute;
        top: 8px; right: 8px;
        background: linear-gradient(45deg, #fde047, #facc15);
        color: #4a2e2e;
        font-size: 0.7rem;
        font-weight: 900;
        padding: 2px 6px;
        border-radius: 6px;
        border: 1px solid #fef08a;
        z-index: 2;
      }
      .theme-preview-card.locked {
          cursor: not-allowed;
          filter: grayscale(80%) brightness(0.7);
      }
      .theme-preview-card.locked .pro-badge {
          background: #4b5563;
          color: #d1d5db;
          border-color: #6b7280;
      }
      
      /* Features Page Redesign */
      .features-hero {
          border-bottom: 2px solid;
          border-image: linear-gradient(to right, transparent, #a855f7, transparent) 1;
          padding-bottom: 2rem;
          margin-bottom: 3rem;
      }
      .feature-card-pro {
          background: rgba(18, 18, 18, 0.6);
          border: 2px solid #2d3748;
          border-radius: 1rem;
          padding: 1.5rem;
          backdrop-filter: blur(6px);
          transition: all 0.3s ease-in-out;
          position: relative;
          overflow: hidden;
      }
      .feature-card-pro:hover {
          transform: translateY(-8px);
          border-color: var(--hover-color, #a855f7);
          box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      }
      .feature-card-pro::before {
          content: '';
          position: absolute;
          top: 0; right: 0;
          width: 200px; height: 200px;
          background: radial-gradient(circle, var(--hover-color, rgba(168, 85, 247, 0.25)), transparent 60%);
          transform: translate(50%, -50%);
          opacity: 0;
          transition: opacity 0.4s ease;
      }
      .feature-card-pro:hover::before {
          opacity: 1;
      }
      .feature-card-pro .feature-content { position: relative; z-index: 1; }
      .feature-theme-preview {
          height: 100px;
          border-radius: 0.5rem;
          border: 2px solid #4b5563;
          background-size: cover;
          margin-bottom: 1rem;
          position: relative;
      }

    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "@heroicons/react/": "https://aistudiocdn.com/@heroicons/react@^2.2.0/",
    "react-router-dom": "https://aistudiocdn.com/react-router-dom@^7.8.2",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^0.15.0"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="./index.js"></script>
  </body>
</html>